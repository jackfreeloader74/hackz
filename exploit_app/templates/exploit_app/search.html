{% extends "exploit_app/base.html" %}

{% block title %}Exploit Discovery - Search{% endblock %}

{% block js %}
  <script src="/static/search.js"  type="text/javascript"></script>
{% endblock %}

{% block content %}

 <div class="container" style="padding-top: 50px;">

   <div class="dropdown">
       <button class="btn btn-secondary dropdown-toggle" type="button" id="searchTypeDropdown" data-bs-toggle="dropdown" aria-expanded="false">
         Search type
       </button>
       <ul id="dropdownSearchList" class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
         <li id="command_search"><a class="dropdown-item" href="#">Command</a></li>
         <li id="program_search"><a class="dropdown-item" href="#">Program</a></li>
         <li id="attack_search"><a class="dropdown-item" href="#">Attack</a></li>
         <li id="something_search"><a class="dropdown-item" href="#">Something else here</a></li>
       </ul>
    </div>


  <div style="padding-top: 30px">
    <div id="searchCommands">
      <div class="text-center">
        <h1 class="display-4">SEARCH COMMANDS</h1>
      </div>
           <div style="padding-top: 50px">
             <form action="/exploit_app/performCommandSearch" method="GET">

                <!-- Command Tag Field -->
                <div class="form-group">
                  <label for="tag" style="padding-bottom: 10px">KEYWORD</label>
                  <input class="form-control" id="tag" name="tag" type="text" placeholder="Tag (e.g. Bash)">
                  <small id="tagHelp" class="form-text text-muted">A tag associated with the command.</small>
                </div>

                <div class="text-center">
                  <button type="submit" class="btn btn-primary">Submit</button>
                </div>
             </form>
       </div>
    <!-- </div> -->
    </div>

    <div id="searchProgramms" style="display: none;">
      <div class="text-center">
        <h1 class="display-4">SEARCH PROGRAMS</h1>
      </div>
           <div style="padding-top: 20px">
             <form action="/exploit_app/performProgramSearch" method="GET">

                <!-- Command Tag Field -->
                <div class="form-group">
                  <label style="padding-bottom: 10px" for="tag" class="float-left">TAG</label>
                  <input class="form-control" id="tag" name="tag" type="text" placeholder="Tag (e.g. Bash)">
                  <small id="tagHelp" class="form-text text-muted">A tag associated with the command.</small>


                <!-- Target Field -->
                <div class="form-group" style="padding-top: 30px">
                  <label style="padding-bottom: 10px" for="target">TARGET</label>
                  <input class="form-control" id="target" name="target" type="text" placeholder="Target (e.g. SSH)">
                  <small id="tagHelp" class="form-text text-muted">Target of the command.</small>
                </div>

                <!-- Stage Dropdown -->
                <div class="form-group" style="padding-top: 30px">
                  <label for="stage" style="padding-bottom: 10px">STAGE</label>

                  <div class="dropdown">
                      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropDownStageButton" data-bs-toggle="dropdown" aria-expanded="false">
                        Search type
                      </button>
                      <ul id="dropdownStageList" class="dropdown-menu" aria-labelledby="Stage">
                        {% for stage in stages %}
                          <li><a class="dropdown-item" href="#">{{ stage.name }}</a></li>
                        {% endfor %}
                      </ul>
                   </div>

               </div>

               <div  class="text-center" style="padding-top: 50px">
                <button type="submit" class="btn btn-primary" >SUBMIT</button>
                </div>
             </form>

       </div>
    <!-- </div> -->
    </div>

<script>
  $( function() {
     $( "#target" ).autocomplete({
        source : "{% url 'target_autocomplete' %}"
     });
  });

  $( function() {
       $( "#tag" ).autocomplete({
          source : "{% url 'tag_autocomplete' %}"
       });
  });






</script>

{% endblock %}
